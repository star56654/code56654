#!/bin/bash

maze=(
  "0000000"
  "0100110"
  "0111100"
  "0010000"
  "0000000"
)

find_exit() {
  rows=${#maze[@]}
  cols=${#maze[0]}
  start_row=$((rows / 2))
  start_col=$((cols / 2))
  queue=("$start_row:$start_col")
  visited=()
  directions=(-1:0 1:0 0:-1 0:1)

  while [[ ${#queue[@]} -gt 0 ]]; do
    current=${queue[0]}
    queue=("${queue[@]:1}")
    IFS=":" read -r x y <<< "$current"

    if [[ $x -eq 0 || $x -eq $((rows - 1)) || $y -eq 0 || $y -eq $((cols - 1)) ]]; then
      echo "Выход найден: $x $y"
      return
    fi

    visited+=("$x:$y")

    for d in "${directions[@]}"; do
      IFS=":" read -r dx dy <<< "$d"
      nx=$((x + dx))
      ny=$((y + dy))

      if [[ $nx -ge 0 && $nx -lt $rows && $ny -ge 0 && $ny -lt $cols && ${maze[nx]:ny:1} -eq 1 ]]; then
        neighbor="$nx:$ny"
        if [[ ! " ${visited[*]} " =~ " $neighbor " ]]; then
          queue+=("$neighbor")
        fi
      fi
    done
  done

  echo "Выхода нет :("
}

find_exit
